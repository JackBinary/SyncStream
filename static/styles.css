* { box-sizing: border-box; margin: 0; padding: 0; }

        :root {
            --bg: #0a0a0f;
            --surface: #14141f;
            --surface-hover: #1a1a2a;
            --border: #2a2a3a;
            --text: #e8e8f0;
            --text-dim: #8888a0;
            --accent: #6366f1;
            --accent-hover: #818cf8;
            --success: #22c55e;
            --error: #ef4444;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 24px;
            min-height: 100vh;
        }

        header { text-align: center; margin-bottom: 24px; }

        h1 { font-size: 1.8rem; font-weight: 600; letter-spacing: -0.02em; }
        h1 span { color: var(--accent); }

        .subtitle { color: var(--text-dim); margin-top: 4px; font-size: 0.85rem; }

        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            width: 100%;
            max-width: 1100px;
            margin-bottom: 16px;
        }

        .top-controls {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: center;
        }

        .top-controls label { color: var(--text-dim); font-size: 0.8rem; font-weight: 500; }

        input {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 10px 14px;
            color: var(--text);
            font-size: 0.9rem;
            outline: none;
            transition: border-color 0.2s;
        }

        input:focus { border-color: var(--accent); }
        input::placeholder { color: var(--text-dim); }

        .code-input {
            width: 90px;
            text-align: center;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 1rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        .nick-input { width: 120px; }
        .url-input { flex: 1; min-width: 180px; }

        button {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 16px;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s, transform 0.1s;
            white-space: nowrap;
        }

        button:hover { background: var(--accent-hover); }
        button:active { transform: scale(0.98); }
        button:disabled { opacity: 0.5; cursor: not-allowed; }

        .btn-secondary { background: var(--surface-hover); border: 1px solid var(--border); }
        .btn-secondary:hover { background: var(--border); }
        .btn-small { padding: 6px 12px; font-size: 0.8rem; }

        .status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            background: var(--bg);
        }

        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--text-dim); }
        .status-dot.connected { background: var(--success); }
        .status-dot.error { background: var(--error); }

        .url-row { display: flex; gap: 12px; margin-top: 12px; }

        .main-content {
            display: flex;
            gap: 16px;
            width: 100%;
            max-width: 1100px;
            flex: 1;
            min-height: 0;
        }

        .left-panel { flex: 1; display: flex; flex-direction: column; gap: 16px; min-width: 0; }

        .player-wrapper {
            position: relative;
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            display: none;
        }

        .player-wrapper.active { display: block; }

        #playerContainer { width: 100%; height: 100%; }
        #playerContainer > div, #playerContainer > iframe { width: 100% !important; height: 100% !important; }

        video, iframe { width: 100%; height: 100%; display: block; border: none; }

        .sync-toast {
            position: absolute;
            top: 12px;
            left: 50%;
            transform: translateX(-50%) translateY(-50px);
            background: rgba(0,0,0,0.85);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            opacity: 0;
            transition: transform 0.3s, opacity 0.3s;
            pointer-events: none;
            z-index: 10;
        }

        .sync-toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

        .viewers {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(0,0,0,0.7);
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.75rem;
            color: var(--text-dim);
            z-index: 10;
        }

        .queue-panel {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px;
            display: none;
        }

        .queue-panel.active { display: block; }

        .queue-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .queue-header h3 { font-size: 0.85rem; font-weight: 500; color: var(--text-dim); }

        .queue-list { display: flex; flex-direction: column; gap: 6px; max-height: 150px; overflow-y: auto; }

        .queue-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 10px;
            background: var(--bg);
            border-radius: 6px;
            font-size: 0.8rem;
        }

        .queue-item.now-playing { border: 1px solid var(--accent); background: rgba(99, 102, 241, 0.1); }
        .queue-item .index { color: var(--text-dim); font-weight: 500; min-width: 20px; }
        .queue-item .url { flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .queue-item.now-playing .index { color: var(--accent); }
        .queue-empty { color: var(--text-dim); font-size: 0.8rem; text-align: center; padding: 16px; }

        .btn-skip { background: var(--error); }
        .btn-skip:hover { background: #dc2626; }

        .chat-panel {
            width: 300px;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            display: none;
            flex-direction: column;
            max-height: 500px;
        }

        .chat-panel.active { display: flex; }

        .chat-header { padding: 12px; border-bottom: 1px solid var(--border); font-size: 0.85rem; font-weight: 500; color: var(--text-dim); }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-height: 200px;
        }

        .chat-msg { font-size: 0.85rem; line-height: 1.4; word-wrap: break-word; }
        .chat-msg .nick { font-weight: 600; color: var(--accent); }
        .chat-msg .text { color: var(--text); }
        .chat-msg.system { color: var(--text-dim); font-style: italic; font-size: 0.8rem; }

        .chat-input-row { display: flex; gap: 8px; padding: 12px; border-top: 1px solid var(--border); }
        .chat-input-row input { flex: 1; padding: 8px 12px; font-size: 0.85rem; }
        .chat-input-row button { padding: 8px 14px; }

        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .modal-overlay.active { display: flex; }

        .modal {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            max-width: 400px;
            width: 90%;
        }

        .modal h2 { font-size: 1.1rem; margin-bottom: 16px; }
        .modal .link-box { display: flex; gap: 8px; }
        .modal input { flex: 1; font-size: 0.85rem; }
        .modal .close-btn { margin-top: 16px; width: 100%; }

        @media (max-width: 800px) {
            .main-content { flex-direction: column; }
            .chat-panel { width: 100%; max-height: 300px; }
            .top-controls { flex-direction: column; align-items: stretch; }
            .code-input, .nick-input { width: 100%; }
        }